# Планирование разработки проекта для версии v2

2.90.1 +удалена сущность zwiftData из коллекции User. Изменена логика получения данных для профиля пользователя. Изменена логика получения и отображения профилей пользователей на странице модерации; 
2.90.2 +изменена логика получения данных для страницы Трансляций; 
2.90.3 +изменение сервиса по обновлению zwift-профилей всех райдеров по расписанию. Изменение сервиса обновления zwift-профиля пользователя по запросу; 
2.90.4 +удалён старого сервиса обновления zwiftData в профилях зарегистрированных пользователей;  
2.90.5 +изображения логотипа пользователя при авторизации их Rider коллекции; 
2.90.6 +обновление данных профиля на клиенте после запроса на обновления профиля с API Zwift;  
2.90.7 +баннер страницы Догонялок с результатами за сезон на страницы с результатами заездов Догонялок;  
2.90.8 +подсветка колонки CP в таблице результатов Эвента при наведении на соответствующую колонку;  
2.90.9 +подсветка колонки CP во всех таблицах, где есть CP при наведении на соответствующую колонку;  
2.90.10 +добавлена колонка racing score в таблицу результатов Эвента;  
2.90.11 +небольшие правки;  
2.90.12 +оптимизация получения данных для страниц статистика-Лидеры. Исправление багов на этих страницах;  
2.91.1 +Добавление в схему Фитфайла свойства banned, для исключения фитфайла в расчетах кривой мощности;  
2.91.2 +Исправление багов;  
2.91.3 +энд поинт, контроллер и сервис обновления состояния блокировки активности райдера в фитфайле;  
2.91.4 +базовые страницы для модерации пользователи, модерации активностей пользователя;  
2.91.5 +энд поинт, контроллер и сервис получения активностей райдера;  
2.91.6 +таблица с активностями райдера за последние 90 дней. Модерация блокировки активностей для исключения их данных в Кривой мощности и таблицах лидера;  
2.91.7 +сервис обновления данных кривой мощности и фитфайлов для зарегистрированного пользователя с привязанным zwiftId;  
2.91.8 +изменения в таблице пользователей для модерации;  
2.91.9 +изменена модерация фитфалов и кривой мощности с пользователя на райдера. Изменены сервисы, страницы модерации пользователей, добавлены страницы модерации райдеров;  
2.91.10 +сервис, контроллер для банна райдера (zwiftId) по списку причин;  
2.91.11 +таблица с баннами для райдера и их модерация. Обработчики редакса для получения и модерации баннов для райдеров;  
2.91.12 +фильтрация результатов CP райдеров с банном для рейтинговых таблиц;  
2.91.13 +переименование TableUsersActivities на TableRidersActivities;  
2.91.14 +добавление иконки управления райдерами в таблицы лидеров, результатов Эвента и в профиль райдера;  
2.91.15 +перенесена таблица управления блокировками райдера на отдельную страницу;  
2.91.16 +добавление стилей для кнопки обновления кривой мощности райдеров;  
2.91.17 +исправлены мелкие баги;  
2.91.18 +скрытие иконки входа на страницу модерации райдера не для админов сайта;  
2.92.19 +обновлена библиотека маршрутов и джерси;  
2.92.20 +добавление в коллекцию Rider документов райдеров, которые привязали zwiftId к профилю пользователя, но не участвовали в заездах;  
2.92.21 +изменения в таблице пользователей для модерации;  
2.92.22 +для райдеров с закрытым профиль отображение категории в виде знака вопроса;  
2.92.23 +для Новичкового заезда для групп свой рейтинг и отставания;  
2.92.24 +удаление обработчиков результатов для newbies заездов. Для newbies установлен обработчик для заездов с делением на группы;  
2.92.25 +для newbies заезда корректировка отображения результатов таблицы;  
2.92.26 +исправление мелких недочетов;  
2.92.27 +оптимизация обработчиков создания протоколов Эвента;  
2.92.28 +запрет установки/снятия дисквалификации результата с DNF или с VP;  
2.92.29 +изменена логика установки/снятия дисквалификации результата в эвенте catchup;  
2.92.30 +добавлен сервис получения каналов и трансляций с youtube пользователей с сайта;  
2.92.31 +изменена структура ответа на запрос о трансляциях твича. Структура сделана одинаковой для твича и ютуба. Изменены компоненты страницы трансляций в соответствии с новой структурой ответа.;  
2.92.32 +добавлен сервис обновления свойства профиля трансляции с youtube;  
2.92.33 +добавлен сервис и форма для изменения настроек трансляции youtube в профиле пользователя;  
2.92.34 +отображение каналов с трансляциями с yotube. Случайное перемешивание карточек каналов перед отображением;  
2.92.35 +оптимизация компонента карточки канала с трансляцией. Логика выбора данных в зависимости от платформы вынесена в отдельный хук;  
2.92.36 +добавление id видео трансляции с ютуб в объект трансляции, для формирования ссылки на трансляцию в клиенте;  
2.92.37 +для inputs если значение undefined то меняется на false;  
2.92.38 +удаление свойств twitch или youtube, если их вложенное свойство isEnabled: false;  
2.92.39 +изменение ссылки с главной страницы канала youtube на страницу трансляций;  
2.92.40 +добавление справки (описания) откуда брать информацию по названию канала в twitch, youtube;  
2.93.1 +добавлена таблица, отображающая лидеров по победам в каждой группе в Догонялках;  
2.93.2 +сервис получения данных по лидерам по победам в группах в Догонялках. Правки в таблице лидеров;  
2.93.3 +обновлены маршруты в БД;  
2.93.4 +исправлен баг с линками на профили райдеров из таблицы лидеров Догонялок;  
2.93.5 +в таблице лидеры по победам в группах поменяны местами столбцы: количество побед и райдер;  
2.93.6 +исправлен баг при подсчете дистанции и набора высоты на маршруте при создании/редактировании заезда;  
2.93.7 +на странице редактирования/создания эвента при изменении карты устанавливается маршрут с новой карты;  
2.94.1 +базовая страница управления организатором, навигация до страницы, иконка навигации для страницы;  
2.94.2 +обновлена схема и типы Организатора;  
2.94.3 +базовые страницы управления клубами организатора и ботом-модератором;  
2.94.4 +добавлен роутер, контроллер и сервис обработки запроса на обновление данных бота-модератора каналов Звифта;  
2.94.5 +добавлен роутер, контроллер и сервис получения сохраненных токенов для ботов-модераторов в клубах Звифта;  
2.94.6 +добавлена информационная карточка бота-модератора;  
2.94.7 +добавлена форма ввода логина/пароля бота-модератора для обновления токена доступа;  
2.94.8 +исправлен баг при получении ошибки при неправильном логине/пароле;  
2.94.9 +функциональность добавления нового бота-модератора при отсутствии ботов;  
2.94.10 +добавлен роутер, контролер и сервис удаления токена из бд;  
2.94.11 +небольшие правки;  
2.94.12 +добавлен роутер, контроллер и сервис получения данных клубов организатора;  
2.94.13 +добавлен роутер, контролер и сервис удаления клуба из бд;  
2.94.14 +добавлен слайс и редуктор для добавление клуба Организатору;  
2.94.15 +добавлен роутер, контролер и сервис добавления клуба в бд для Организатора;  
2.94.16 +сброс данных о клубе из хранилища редакс при размонтировании компонента;  
2.94.17 +добавлен слайс и редуктор для получения зарегистрированных пользователей их username и zwiftId по запросу модератора;  
2.94.18 +добавлен роутер, контролер и сервис для получения зарегистрированных пользователей их username и zwiftId по запросу модератора;  
2.94.19 +добавлен слайс и редуктор для добавления модератора в клуб;  
2.94.20 +добавлен роутер, контролер и сервис для добавления модератора в клуб;  
2.94.21 +добавлен слайс и редуктор для удаления пользователя из модераторов в клуб; 
2.94.22 +добавлен роутер, контролер и сервис для удаления пользователя из модераторов в клуб; 
2.94.23 +добавлена фитча удаления clubId из документа User пользователя из массива модераторов клуба при удалении соответствующего клуба; 
2.94.24 +небольшие правки; 
2.94.25 +для конфигурации accessExpressions для догонялок увеличен порог абсолютных ватт для Д категории с 160 до 200Вт; 
2.94.26 +добавлен роутер, контролер и сервис получения данных об Организаторе при запросе модератором и отображение названия Организатора на соответствующих страницах; 
2.94.27 +добавлены проверки при добавлении клуба организатору; 
2.95.1 +выделение отдельной виртуальной роли для модераторов клубов. Создана middleware для модераторов клубов. Маршруты для работы с Эвентами Звифта проходят проверку на модератора клубов; 
2.95.2 +добавлен роутер, контролер и сервис для получения данных клубов в которых пользователь является модератором. Открытие маршрута получения данных актуальных серий для модератора клубов; 
2.95.3 +открыт доступ к маршрутам управления Эвентами для модератора клубов; 
2.95.4 +создан компонент для элемента бокового меню навигации по страницам; 
2.95.5 +создан middleware для проверки, что пользователь является модератором. Для модератора клубов открыты соответствующи иконки для модерации в списке эвентов и в описании эвента; 
2.95.6 +для модератора клубов открыта иконка для модерации в списке результатов эвентов; 
2.95.7 +создание документа rider для привязываемых zwiftid к профилю пользователя у которых нет результатов в БД; 
2.95.8 +изменена структура входных параметров для функций запросов на ZwiftAPI; 
2.95.9 +добавлена ссылка на документ Organizer в схему ZwiftEventSchema для получения token доступа к ZwiftAPI для последующий работы с ZwiftEvent;  
2.95.10 +обновление результатов Эвента с использованием токена доступа к ZwiftAPI соответствующего организатора;  
2.95.11 +создание Эвента в Звифте только через ключ Организатора;  
2.95.12 +добавление id организатора в объект Эвента при добавлении Эвента в БД;  
2.95.13 +проверка доступа к добавлению Эвента в БД перенесена в контроллер из сервиса;  
2.95.14 +обновление параметров Эвента с использованием токена доступа к ZwiftAPI соответствующего организатора;  
2.95.15 +использование токена доступа Организатора для получения/обновления putSignedRidersService зарегистрированных райдеров;  
2.95.16 +использование токена доступа Организатора для модуля getEventZwiftService;  
2.95.17 +убран второй общий бот для модерации Эвентов в клубах;  
2.95.18 +добавлен заголовок к форме поиска клуба по id;  
2.95.19 +все функции работы с токенами доступа собраны в одном модуле;  
2.95.20 +изменение порога мощности для группы Д;  
2.95.21 +AES-шифрование для токена доступа в БД;  
2.95.22 +исправлены баги связанные с дешифрацией токенов доступа;  
2.95.23 +сервис, контроллер и маршрут для получения данных организаторов в клубах которых пользователь является модератором;  
2.95.24 +изменение структуры запроса получения данных Эвента для просмотра/редактирования;  
2.95.25 +исправлен баг при запросе эвента на его редактирование или добавление;  
2.95.26 +исправлены баги при создании Эвента и добавлении его на сайт;  
2.95.27 +условная отрисовка соответствующих форм на странице Добавления и поиска Эвента;  
2.95.28 +отдельный маршрут, контролер, сервис и slice (на клиенте) для страницы Редактирование Эвента;  
2.95.29 +небольшие изменения в стилизации некоторых элементов;  
2.95.30 +исправлен баг при удалении токена организатора: удалялся первый токен в БД;  
2.95.31 +небольшие изменения в стилизации некоторых элементов. Изменены названия в шапке таблицы добавления клубов Организатором;
2.95.32 +обработка ошибок в запросах pots, put на Zwift API, дополнительная информация если токен невалидный. Обработка ошибок для контроллеров сделана в отдельном модуле. Новый обработчик добавлен для контроллеров создания и обновления Эвентов.
2.95.33 +переименование функции логирования ошибок с errorHandler на handleAndLogError.
2.95.34 +исправлен баг, когда не сбрасывались данные из хранилища при размонтировании страницы просмотра данных Эвента.
2.95.35 +добавлены подсказки на страницах добавления, редактирования и просмотра заездов в Звифте. Уточнены основные положения работы с заездами Звифта через сайт zwiftpower.ru  
2.95.36 +изменены стили расположения таблиц на странице Догонялок;  
2.95.37 +при запросе на Zwift API передача описания ошибки на клиент;  
2.95.38 +исправлен баг при обновлении профиля райдера;  
2.95.39 +скрытие блока с барами мощности для профиля при отсутствии данных по CP;  
2.95.40 +добавление пункта NON_REGULAR_PARTICIPANT для блокировки райдера в рейтинговых таблица;  
2.95.41 +исправлен баг при доступе организатора к закрытым страницам сайта;  
2.96.1 +добавлен базовый сервис регистрации через VK ID;  
2.96.2 +отправка токинов доступа на бэкэнд для регистрации нового пользователя;  
2.96.3 +сервис, контролер и маршрут регистрации через VK ID;  
2.96.4 +сохранение данных регистрации в хранилище редакс после успешной регистрации на сервере;  
2.96.5 +новый вариант авторизации через VK ID и создание документа токена авторизации на серверной части;  
2.96.6 +хуки получения информации об устройстве и локации для токена доступа при регистрации;  
2.96.7 +исправлены баги с куками при регистрации через VK ID;  
2.96.8 +аутентификация через VK ID на стороне клиента;  
2.96.9 +аутентификация через VK ID на серверной стороне;  
2.96.10 +изменение статус кода на 200 об ошибке при запросе на обновление ключа доступа и данных пользователя для клиента;  
2.96.11 +перенаправление со страницы колбэк vk на домашнюю;  
2.96.12 +перенаправление на домашнюю страницу в случае успешной аутентификации;  

----
-проверь необходимость сохранять данные в токене доступа в текущем варианте, например, данные из VK ID;   
-TokenSchema два одинаковых типа, проверить какой лишний. Дать семантическое название.
-убрать forView: forViewBoolean, из модуля, перенести в родительский компонент;  
-в /zwift/event/view просматриваются через общий токен, значит для закрытых Эвентов просмотр будет невозможен;  
-убрать расчет категории getProfileService так как category из профиля нигде не используется?, а используется только zCategory;  
-сделать проверку наличия бота у организатора с отображением предупреждения если такого нет.
-почистить слайсы, редукторы, маршруты, контроллеры, сервисы для работы с клубами через админа, так как все сделано через модераторов;
-filterByRankCatchup проверить необходимость использования в handlerCatchUpModified, так как в обработчиках других результатов он не используется.  
-что будет при запросе на обновления райдера которого нет в Rider или в других данных в БД.  
-не отправляется ошибка на клиент в updateFitFileAndPowerCurveService если случилась внутри модулях данной функции.  
-проработать логику при привязки zwiftId к профилю пользователя и дополнительных zwiftId.
-баг: в заезде 4354504 при выставлении classicGroup Vasily Suchkov(A) присваивается нулевое место??
-сделать оповещение при генерации большого количества ошибок на сервере;  
-сделать оповещение при генерации большого количества запросов на APIZwift;  
-обновлять данные райдера после получения результатов заезда?;  
-убрать перезагрузку страницы при обновлении данных эвента (расписание);  
-запрет на внесение изменений данных Эвента если пользователь не является модератором в Клубе;  
-переделать FormRequest под универсальные редюсеры;  
-очистка redis раз в сутки, принудительная очистка redis по запросу админа;  
-сделать из двух preparation создания и изменения Эвентов один общий;  
-main banner перенести в мобильной версии под карточку первого Эвента;  
-в баннере для десктоп отключить видео рекламу. Сделать отдельный банер для мобильной версии, видео рекламу оставить;  
-для баров, показывающих ватты и уд.ватты в профиле сделать анимацию огня и красного цвета при 100% заполнении соответствующего бара;  
-навести порядок с resetFilterCategory, многие сбрасываются при монтировании компонента, а не при размонтировании;  
-определение категории при регистрации в Эвент и после получения результата в Эвенте;
-ошибка после сохранения изменений в Эвенте, который не добавлен на сайт 
-обработка ошибки при сохранении изменений с новыми лидерами Эвента "not.member.of.external.resource";  
-сделать универсальным компонент FindZwiftProfileNew;  
-сохранение powerCurve для райдеров с закрытыми профилями в Звифте;  
-что будет если сменить основной профиль при дополнительных. Поставить запрет на смену основного
при наличии дополнительных?;  
-{ zwiftIdAdditional: [] }, убрать появление пустых массивов;  
-ZwiftProfileSchema проверить реализацию, когда обновляется и где запрашивается. Создавалась для
уменьшения и оптимизации запросов с ZwiftAPI;  
 -переделать компоненты навигации с использованием модулей navActive;  
-очищать данные из фитфайла активностей которые старше 90 дней???;  
-LeadersInIntervals исключать результаты дисквалифицированных и с ВиртуалПауэр;  
-сделать тесты на getWeek;  
-выделение столбца по которому ведется сортировка;  
-проработать объект описывающий дисквалификации и нарушения;  
-перенести в редакс стейты при пагинации;  

-перенести все окна confirms в хуки;  
-сделать сервис для загрузки и хранения изображений для заездов в Звифте;  
-очистка singedEiders у которых нет привязки к eventSubgroup (документы по какой то причине не
удалились);  
-добавить HOC для отображения блоков для админов(модераторов);  
-сделать "хлебные крошки";  
-как сделать общими файлы asset для fronta и backenda(например описание логов );  
привет


я отошёл от дел уже, моя схема уже неэффективна (подкручивают гайки звифт), а каждую неделю неохота активировать, лучше делать самостоятельно:
годовой план в ЛК открываете zwift.com/join, там плат. данные вбиваете, катаете неделю, потом обновляете
Плат. данные можно найти в тг каналах всяких, например t.me/ATIK_TIPS_TRICK (пробовать нужно, где BIN и 4 цифры в конце только надо сгенерировать), генератор https://www.aimtuto.com/p/cc-bin-generator.html


5156240253017431|07|2026|154
5156240253014040|07|2026|082
5156240253013026|07|2026|703
5156240253014370|07|2026|865
5156240253011269|07|2026|554
5156240253015856|07|2026|405
5156240253012549|07|2026|031
5156240253012085|07|2026|330
5156240253018785|07|2026|585
5156240253010469|07|2026|202
5156240253012473|07|2026|010
5156240253017845|07|2026|082
5156240253011160|07|2026|831
5156240253018348|07|2026|767
5156240253010824|07|2026|208
5156240253018579|07|2026|787

вот, например, были рабочие, это адреса нужно вбивать UAE (арабские эмираты). Генерировать можно по 515624025301xxxx
Генератор адресов тоже найти можно, либо вбивать Dubai и индекс 00000